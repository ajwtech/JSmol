<project name="JSmol" default="fromJmol" basedir=".">
 
	<!-- note that org.jmol.util.BitSet is NOT transferred, because we already have the 32-bit version in JSmol.
	     org.jmol.util.BitSet32.java is just there for a backup. -->
  <target name="fromJmol" id="fromJmol">
	<copy todir="" >
	  <fileset dir="../Jmol/src/org/jmol/viewer/">
	    <include name="Jmol.properties" />
	  </fileset>
	  <filterchain>
	    <striplinecomments>
	      <comment value="#" />
	    </striplinecomments>
	    <linecontains>
	      <contains value="___" />
	    </linecontains>
	  </filterchain>
	</copy>
    <copy overwrite="true" todir="src/org/jmol" >
      <fileset dir="../Jmol/src/org/jmol">
        <include name="**/*.java" />
      	<!-- specialized JSmol versions -->
        <exclude name="**/applet/*"/>
        <exclude name="**/awt/*"/>
      	<!-- see next block -->
        <exclude name="**/export/**/*"/>
        <exclude name="**/console/*"/>
      	<exclude name="**/modelkit/*"/>
        <exclude name="**/popup/*"/>
      	<!-- unused -->
        <exclude name="**/multitouch/**/*"/>
      </fileset>
    </copy>
  	<copy overwrite="true" todir="src/org/jmol/console" >
      <fileset dir="../Jmol/src/org/jmol/console">
        <include name="Generic*.java" />
      </fileset>
    </copy>
  	<copy overwrite="true" todir="src/org/jmol/export/image" >
      <fileset dir="../Jmol/src/org/jmol/export/image">
        <include name="Generic*.java" />
      </fileset>
    </copy>
  	<copy overwrite="true" todir="src/org/jmol/modelkit" >
      <fileset dir="../Jmol/src/org/jmol/modelkit">
        <include name="**/*" />
        <exclude name="ModelKitPopup.java"/>
      </fileset>
    </copy>
  	<copy overwrite="true" todir="src/org/jmol/popup" >
      <fileset dir="../Jmol/src/org/jmol/popup">
        <include name="**/*.java" />
        <exclude name="JmolPopup.java"/>
        <exclude name="SwingPopup.java"/>
      </fileset>
    </copy>
  	<move file="src/org/jmol/util/BitSet32.java" tofile="src/org/jmol/util/BS.java" />
  	<replace file="src/org/jmol/util/BS.java" token="BitSet32" value="BS" />
  </target>
	
</project>
