<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="js/JSmoljQueryExt.js"></script>
<script type="text/javascript" src="js/JSmolCore.js"></script>
<script type="text/javascript" src="js/JSmolApplet.js"></script>
<script type="text/javascript" src="js/JSmolApi.js"></script>
<script type="text/javascript" src="js/JSmolControls.js"></script>
<script type="text/javascript" src="js/j2sjmol.js"></script>
<script type="text/javascript" src="js/JSmol.js"></script>
<script type="text/javascript" src="js/JSmolMenu.js"></script>
<script type="text/javascript" src="js/JSmolConsole.js"></script>
<script type="text/javascript" src="js/JSmolJSV.js"></script>
<script type="text/javascript" src="js/JSmolJME.js"></script>
<script type="text/javascript" src="jsme/jsme/jsme.nocache.js"></script>

<script type="text/javascript">

// always predefine the variables as their own name,
// allowing buttons to be created before or after applet placement

// applet ids and commands to give only when all applets are ready;
// also sets up a script sync pathway for Jmol/JSpecView.
Jmol.setAppletSync(["jsvApplet0", "jmolApplet0"], ["load data/acetophenone.jdx", ""], true);

var SInfo;       // for Spectrum
var MInfo;       // for Molfile

;(function() {

//jsv_isReady = function(applet) {
//	document.title = (applet._id + " is ready")
//	Jmol._getElement(applet, "appletdiv").style.border="1px solid blue"
//}

Jmol.setGrabberOptions([["$", "NCI"]]) // allows 2D reading

JSVInfo = {
	width: 800,
	height: 300,
	debug: false,
	color: "0xC0C0C0",
//	addSelectionOptions: true,
//	serverURL: "http://chemapps.stolaf.edu/jmol/jsmol/php/jsmol.php",
	use: "HTML5",
	j2sPath: "j2s",
  disableJ2SLoadMonitor: true,
  disableInitialConsole: true,
	readyFunction: null,      //   jsv_isReady
  allowjavascript: true
//        console: "consolediv"
}

JMEInfo = {     
  addSelectionOptions: true,
	width: 300,
	height: 300,
	use: "HTML5"
  ,options : "nohydrogens;autoez;removehs"
	//,jarPath: "jme",
	//,jarFile: "JME.jar"
  //optional parameters
  //,"jme" : startingStructure   
}



})();

function predictSpectrum() {
  var s = jme.molFile();
  s = "load MOL \"" + s.replace(/\n/g,"|") + "\""
  alert(s)
  jsv.script(s);
}

$(document).ready(function() {

  $("#jsmediv").html(Jmol.getJMEAppletHtml("jme",JMEInfo)))  
  $("#jsvdiv").html(Jmol.getJSVAppletHtml("jsv",JSVInfo)))  
});

</script>
</head>
<body>
<table width=1000 cellpadding=10 border=1 >
<tr>
<td>
<div id=jsmediv></div>
</td>
<td>
<div id=btndiv></div>
<input type="button" onclick="predictSpectrum()" value="&#8594" />
</td>
<td>
<div id=jsvdiv></div>
</td>
</tr>
</table>
<a href="javascript:jsv._showInfo(true);jme._showInfo(true)">show info</a>
</div>
</body>
</html>
